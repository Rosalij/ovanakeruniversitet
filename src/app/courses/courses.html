<app-header></app-header>
<div class="coursesdiv">
    <div id="content">
        <h2>Sök efter kurser</h2>
        <p>Du kan även lägga till kurser i ditt ramschema.</p>
        <br>
        <div id="searchDiv">
            <div>
                <h3>Sök efter kurser:</h3><mat-form-field>
                    <mat-label>Sök kurs</mat-label>
                    <input matInput placeholder="Ange kursnamn eller kurskod" [(ngModel)]="searchTerm"
                        (ngModelChange)="onSearch()">
                </mat-form-field>
            </div>
            <div>
                <h3>Filtrera efter ämne:</h3>
                <mat-form-field>
                    <mat-label>Välj ämne</mat-label>
                    <mat-select [(value)]="selectedSubject" (selectionChange)="onSubjectChange()">
                        <mat-option value="">Alla ämnen</mat-option>
                        <mat-option *ngFor="let subject of subjects" [value]="subject">
                            {{ subject }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <!--Course Table -->
        <table mat-table [dataSource]="dataSource" matSort class="full-width-table">


            <ng-container matColumnDef="courseName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Kursnamn </th>
                <td id="coursename" mat-cell *matCellDef="let course"> {{course.courseName}} </td>
            </ng-container>

            <ng-container matColumnDef="courseCode">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Kurskod </th>
                <td mat-cell *matCellDef="let course"> {{course.courseCode}} </td>
            </ng-container>


            <ng-container matColumnDef="points">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Poäng </th>
                <td mat-cell *matCellDef="let course"> {{course.points}} </td>
            </ng-container>

            <ng-container matColumnDef="progression">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Progression </th>
                <td mat-cell *matCellDef="let course"> {{course.progression}} </td>
            </ng-container>


            <ng-container matColumnDef="subject">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Ämne </th>
                <td mat-cell *matCellDef="let course"> {{course.subject}} ({{course.subjectCode}}) </td>
            </ng-container>


            <ng-container matColumnDef="syllabus">
                <th mat-header-cell *matHeaderCellDef> Kursplan </th>
                <td mat-cell *matCellDef="let course">
                    <a [href]="course.syllabus" target="_blank">Läs kursplan</a>
                </td>
            </ng-container>


            <ng-container matColumnDef="save">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let course">
                    <button mat-raised-button color="primary" (click)="addToSaved(course)"
                        [disabled]="isCourseSaved(course)">
                        {{ isCourseSaved(course) ? 'Tillagd' : 'Lägg till' }}
                    </button>

                </td>
            </ng-container>



            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>
</div>