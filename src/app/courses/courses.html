<app-header></app-header>
<div class="coursesdiv">
    <div id="content">
        <h2>Sök efter kurser</h2>
        <p>Du kan även lägga till kurser i ditt ramschema.</p>
        <br>
        <div id="searchDiv">
            <div>
                <h3>Sök efter kurser:</h3><mat-form-field>
                    <mat-label>Sök kurs</mat-label>
                    <input matInput placeholder="Ange kursnamn eller kurskod" [(ngModel)]="searchTerm"
                        (ngModelChange)="onSearch()">
                </mat-form-field>
            </div>
            <div>
                <h3>Filtrera efter ämne:</h3>
                <mat-form-field>
                    <mat-label>Välj ämne</mat-label>
                    <mat-select [(value)]="selectedSubject" (selectionChange)="onSubjectChange()">
                        <mat-option value="">Alla ämnen</mat-option>
                        <mat-option *ngFor="let subject of subjects" [value]="subject">
                            {{ subject }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <!-- Table -->
        <table mat-table [dataSource]="paginatedCourses" class="mat-elevation-z8 full-width-table">


            <ng-container matColumnDef="courseName">
                <th mat-header-cell *matHeaderCellDef> Kursnamn </th>
                <td mat-cell *matCellDef="let course"> {{course.courseName}} </td>
            </ng-container>

            <ng-container matColumnDef="courseCode">
                <th mat-header-cell *matHeaderCellDef> Kurskod </th>
                <td mat-cell *matCellDef="let course"> {{course.courseCode}} </td>
            </ng-container>


            <ng-container matColumnDef="points">
                <th mat-header-cell *matHeaderCellDef> Poäng </th>
                <td mat-cell *matCellDef="let course"> {{course.points}} </td>
            </ng-container>

            <ng-container matColumnDef="progression">
                <th mat-header-cell *matHeaderCellDef> Progression </th>
                <td mat-cell *matCellDef="let course"> {{course.progression}} </td>
            </ng-container>


            <ng-container matColumnDef="subject">
                <th mat-header-cell *matHeaderCellDef> Ämne </th>
                <td mat-cell *matCellDef="let course"> {{course.subject}} ({{course.subjectCode}}) </td>
            </ng-container>


            <ng-container matColumnDef="syllabus">
                <th mat-header-cell *matHeaderCellDef> Kursplan </th>
                <td mat-cell *matCellDef="let course">
                    <a [href]="course.syllabus" target="_blank">Läs kursplan</a>
                </td>  
            </ng-container>

          
                   <ng-container matColumnDef="save">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let course">
                      <button mat-raised-button color="accent" (click)="addToSaved(course)">
     Lägg till
      </button>
                </td>  
            </ng-container> 
              
            
            
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator [length]="filteredCourses.length" [pageSize]="pageSize" [pageIndex]="pageIndex"
            [pageSizeOptions]="[5, 10, 20]" (page)="onPageChange($event)">
        </mat-paginator>
    </div>
</div>